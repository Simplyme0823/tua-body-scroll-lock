const e=()=>"undefined"==typeof window,t=e=>document.querySelector(e),o=e=>{e=e||navigator.userAgent;const t=/(iPad).*OS\s([\d_]+)/.test(e);return{ios:!t&&/(iPhone\sOS)\s([\d_]+)/.test(e)||t,android:/(Android);?[\s\/]+([\d.]+)?/.test(e)}};let i=0,n=0,s=0,r=null,l=!1;const c=[],d=function(t){if(e())return!1;if(!t)throw new Error("options must be provided");let o=!1;const i={get passive(){o=!0}},n=()=>{};window.addEventListener("__TUA_BSL_TEST_PASSIVE__",n,i),window.removeEventListener("__TUA_BSL_TEST_PASSIVE__",n,i);const{capture:s}=t;return o?t:void 0!==s&&s}({passive:!1}),h=e=>{e.cancelable&&e.preventDefault()},a=a=>{if(!e()){if(o().ios){if(a){(Array.isArray(a)?a:[a]).forEach(e=>{e&&-1===c.indexOf(e)&&(e.ontouchstart=e=>{n=e.targetTouches[0].clientY,s=e.targetTouches[0].clientX},e.ontouchmove=t=>{1===t.targetTouches.length&&((e,t)=>{if(t){const{scrollTop:o,scrollLeft:i,scrollWidth:r,scrollHeight:l,clientWidth:c,clientHeight:d}=t,a=e.targetTouches[0].clientX-s,u=e.targetTouches[0].clientY-n,f=Math.abs(u)>Math.abs(a),y=u>0&&0===o,g=a>0&&0===i,p=a<0&&i+c+1>=r,v=u<0&&o+d+1>=l;if(f&&(y||v)||!f&&(g||p))return h(e)}e.stopPropagation()})(t,e)},c.push(e))})}l||(document.addEventListener("touchmove",h,d),l=!0)}else i<=0&&(r=o().android?(()=>{const e=t("html"),o=t("body"),i=e.scrollTop||o.scrollTop,n=Object.assign({},e.style),s=Object.assign({},o.style);return e.style.height="100%",e.style.overflow="hidden",o.style.top=`-${i}px`,o.style.width="100%",o.style.height="auto",o.style.position="fixed",o.style.overflow="hidden",()=>{e.style.height=n.height||"",e.style.overflow=n.overflow||"",["top","width","height","overflow","position"].forEach(e=>{o.style[e]=s[e]||""}),window.scrollTo(0,i)}})():(()=>{const e=t("body"),o=Object.assign({},e.style),i=window.innerWidth-document.body.clientWidth;return e.style.overflow="hidden",e.style.boxSizing="border-box",e.style.paddingRight=`${i}px`,()=>{["overflow","boxSizing","paddingRight"].forEach(t=>{e.style[t]=o[t]||""})}})());i+=1}},u=t=>{if(!(e()||(i-=1)>0))if(o().ios||"function"!=typeof r){if(t){(Array.isArray(t)?t:[t]).forEach(e=>{const t=c.indexOf(e);-1!==t&&(e.ontouchmove=null,e.ontouchstart=null,c.splice(t,1))})}l&&(document.removeEventListener("touchmove",h,d),l=!1)}else r()};export{a as lock,u as unlock};
