!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).bodyScrollLock={})}(this,function(t){"use strict";var e=function(){return"undefined"==typeof window},o=function(t){return document.querySelector(t)},n=function(t){t=t||navigator.userAgent;var e=/(iPad).*OS\s([\d_]+)/.test(t);return{ios:!e&&/(iPhone\sOS)\s([\d_]+)/.test(t)||e,android:/(Android);?[\s\/]+([\d.]+)?/.test(t)}};var i=0,r=0,s=0,c=null,l=!1,d=[],u=function(t){if(e())return!1;if(!t)throw new Error("options must be provided");var o=!1,n={get passive(){o=!0}},i=function(){};window.addEventListener("__TUA_BSL_TEST_PASSIVE__",i,n),window.removeEventListener("__TUA_BSL_TEST_PASSIVE__",i,n);var r=t.capture;return o?t:void 0!==r&&r}({passive:!1}),f=function(t){t.cancelable&&t.preventDefault()};t.lock=function(t){if(!e()){var a,h,v,y,p;n().ios?(t&&(Array.isArray(t)?t:[t]).forEach(function(t){t&&-1===d.indexOf(t)&&(t.ontouchstart=function(t){r=t.targetTouches[0].clientY,s=t.targetTouches[0].clientX},t.ontouchmove=function(e){1===e.targetTouches.length&&function(t,e){if(e){var o=e.scrollTop,n=e.scrollLeft,i=e.scrollWidth,c=e.scrollHeight,l=e.clientWidth,d=e.clientHeight,u=t.targetTouches[0].clientX-s,a=t.targetTouches[0].clientY-r,h=Math.abs(a)>Math.abs(u);if(h&&(a>0&&0===o||a<0&&o+d+1>=c)||!h&&(u>0&&0===n||u<0&&n+l+1>=i))return f(t)}t.stopPropagation()}(e,t)},d.push(t))}),l||(document.addEventListener("touchmove",f,u),l=!0)):i<=0&&(c=n().android?(a=o("html"),h=o("body"),v=a.scrollTop||h.scrollTop,y=Object.assign({},a.style),p=Object.assign({},h.style),a.style.height="100%",a.style.overflow="hidden",h.style.top="-".concat(v,"px"),h.style.width="100%",h.style.height="auto",h.style.position="fixed",h.style.overflow="hidden",function(){a.style.height=y.height||"",a.style.overflow=y.overflow||"",["top","width","height","overflow","position"].forEach(function(t){h.style[t]=p[t]||""}),window.scrollTo(0,v)}):function(){var t=o("body"),e=Object.assign({},t.style),n=window.innerWidth-document.body.clientWidth;return t.style.overflow="hidden",t.style.boxSizing="border-box",t.style.paddingRight="".concat(n,"px"),function(){["overflow","boxSizing","paddingRight"].forEach(function(o){t.style[o]=e[o]||""})}}()),i+=1}},t.unlock=function(t){e()||(i-=1)>0||(n().ios||"function"!=typeof c?(t&&(Array.isArray(t)?t:[t]).forEach(function(t){var e=d.indexOf(t);-1!==e&&(t.ontouchmove=null,t.ontouchstart=null,d.splice(e,1))}),l&&(document.removeEventListener("touchmove",f,u),l=!1)):c())},Object.defineProperty(t,"__esModule",{value:!0})});
